@page "/Error"
@using System.Diagnostics
@inject NavigationManager Navigation

<PageTitle>Error - SurveyDashboard</PageTitle>

<div class="error-container">
    <div class="error-card">
        <div class="error-icon">
            <span class="error-emoji">😵</span>
        </div>
        
        <h1 class="error-title">Oops! Something went wrong</h1>
        <h2 class="error-subtitle">We apologize for the inconvenience</h2>
        
        <div class="error-description">
            <p>An unexpected error occurred while processing your request. Our team has been automatically notified and will look into this issue.</p>
        </div>

        @if (ShowRequestId)
        {
            <div class="error-details">
                <p><strong>Error ID:</strong> <code>@RequestId</code></p>
                <p class="error-help-text">Please include this ID when contacting support</p>
            </div>
        }

        <div class="error-actions">
            <button class="btn btn-primary" @onclick="GoHome">
                🏠 Go to Homepage
            </button>
            <button class="btn btn-secondary" @onclick="GoBack">
                ← Go Back
            </button>
            <button class="btn btn-outline" @onclick="RefreshPage">
                🔄 Refresh Page
            </button>
        </div>

        <div class="error-support">
            <p>Need help? Contact us:</p>
            <a href="mailto:support@um.dk" class="support-link">📧 support@um.dk</a>
        </div>
    </div>
</div>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;

    private void GoHome() => Navigation.NavigateTo("/");
    private void GoBack() => Navigation.NavigateTo(Navigation.Uri);
    private void RefreshPage() => Navigation.Refresh();
}


